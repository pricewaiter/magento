#!/bin/bash
# Runs functional tests inside the various running docker containers.
# Hint: any arguments you pass to this script will be forwarded to mocha running inside the docker container.

# TODO: Allow switching container in some convenient way.
CONTAINER=magento_v19php55-tests_1

docker ps --format '{{.Names}}' | grep $CONTAINER > /dev/null
IS_RUNNING=$?

if [ $IS_RUNNING == 0 ]; then
    CMD="cd /usr/src && npm start -- --colors $@"
    docker exec -it $CONTAINER sh -c "$CMD"
else
    echo "Magento container is not running. Hint: start it using docker-compose up"
fi
